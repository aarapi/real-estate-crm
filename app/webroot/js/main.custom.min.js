$(document).ready(function(){
$('#selectAll').click(function() {
$('.chkselect').prop('checked', this.checked);});
$('.multiselectgrp').multiselect({includeSelectAllOption: true,
    allSelectedText: 'All Selected'});
});
function check_perform_add(target)
{
    show_modal(target);
}
function check_perform_sdelete(id)
{
    if(confirm(getLocale("Do you want to delete selected record")))
    {
        $(document).ready(function(){
        $('.chkselect').prop('checked', false);
        $("#DeleteCheckbox"+id).prop( "checked", true );
        document.deleteallfrm.submit();
        });
    }
}
function check_perform_delete()
{
    var numberOfChecked = $('.chkselect:checked').length;
    if(numberOfChecked==0)
    alert(getLocale("Please Select Any Record"));
    else
    {
        if(confirm(getLocale("Do You Want To Delete")+" " +numberOfChecked+" "+getLocale("Record")))
        document.deleteallfrm.submit();
    }
}
function check_perform_edit(id)
{
    var numberOfChecked = $('.chkselect:checked').length;
    var SelectedItem = new Array();
    if(numberOfChecked==0)
    alert(getLocale("Please Select Any Record"));
    else
    {
         $('.chkselect:checked').each(function(){
            if ($('.chkselect').is(':checked'))
            SelectedItem.push($(this).val());
            });         
        var target = id+"/edit/"+SelectedItem;
         show_modal(target);
    }
}
function check_perform_editfull(id)
{
    var numberOfChecked = $('.chkselect:checked').length;
    var SelectedItem = new Array();
    if(numberOfChecked==0)
    alert(getLocale("Please Select Any Record"));
    else
    {
         $('.chkselect:checked').each(function(){
            if ($('.chkselect').is(':checked'))
            SelectedItem.push($(this).val());
            });         
        var target = id+"/edit/"+SelectedItem;
        window.location=target;
    }
}
function check_perform_editPage(controller,id)
{
    var target = controller+"/edit/"+id;
    window.location=target;
}
function check_perform_sedit(controller,id)
{
    var target = controller+"/edit/"+id;
    show_modal(target);
}
function check_perform_select(id,controller)
{
    var numberOfChecked = $('.chkselect:checked').length;
    var SelectedItem = new Array();
    if(numberOfChecked==0)
    alert(getLocale("Please Select Any Record"));
    else
    {
         $('.chkselect:checked').each(function(){
            if ($('.chkselect').is(':checked'))
            SelectedItem.push($(this).val());
            });         
        var target = id+"/"+controller+"/"+SelectedItem;
         show_modal(target);
    }
}
function single_question(action,id)
{
    $(document).ready(function(){
        $("#DeleteCheckbox"+id).prop( "checked", true );
        document.deleteallfrm.action.value=action;
        document.deleteallfrm.submit();
    });
}
function all_question(action)
{
    var numberOfChecked = $('.chkselect:checked').length;
    if(numberOfChecked==0)
    alert(getLocale("Please Select Any Record"));
    else
    {
        document.deleteallfrm.action.value=action;
        document.deleteallfrm.submit();
    }
}
function show_modal(target)
{
    waitingDialog.show();
    $('#targetModal').load(target, function() {
        $('#targetModal').modal('show');
        waitingDialog.hide();
    });
}   
$(document).ready(function() {

$('.table-responsive .dropdown-toggle').on('click', function() {
    var button = $(this),
        menu = button.next('.dropdown-menu');

    menu.css({
        position: 'fixed',
        top: button.offset().top + button.outerHeight() - $(window).scrollTop(),
        right: $(window).width() - (button.offset().left + button.outerWidth())
    });

    $(window).on('scroll', function() {
        menu.css({
            top: button.offset().top + button.outerHeight() - $(window).scrollTop()
        });
    });

    $(window).on('resize', function() {
        $('.dropdown-backdrop').trigger('click');
        button.blur();
        $(window).off('resize scroll');
    });
});
});
function sms_character_count()
{
    var len = $('#SendsmsMessage').val().length;
    if(len<160)
    sms=1;
    else
    {
        var sms = Math.floor(len/160)+1;	
    }
    var ch = len;
    $('#characterLeft').text(ch + getLocale(' characters ')+ '('+sms+getLocale(' sms)'));
}
function escapeRegExp(mstring) {
    return mstring.replace(/([.*+?^=!:${}()|\[\]\/\\ & %@#<>])/g, "-");
}
$(document).ready(function () {
$("#printme").click(
function(){
$(".pbutton").hide();    
$("#printable_content").print({
// Use Global styles
globalStyles : false, 

// Add link with attrbute media=print
mediaPrint : false, 

//Print in a hidden iframe
iframe : false, 

// Manually add form values
manuallyCopyFormValues: true,

// resolves after print and restructure the code for better maintainability
deferred: $.Deferred(),

// timeout
timeout: 250,

// Custom title
title: null,

// Custom document type
doctype: '<!doctype html>'

});
$(".pbutton").show();
});});
$(document).on('focusin', function(e) {
    if ($(event.target).closest(".mce-window").length) {
        e.stopImmediatePropagation();
    }
});